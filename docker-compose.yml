# Lumina Host: image gallery with WordPress media and AMT (auth/multi-tenancy).
# Copy example.env to .env and set FLASK_SECRET_KEY; for AMT set ADMIN_USERNAME, ADMIN_EMAIL, ADMIN_PASSWORD.
# WordPress: set WP_API_URL, WP_USER, WP_PASS in .env or in the app (Profile > WordPress integration, admin only).

services:
  web:
    build: .
    ports:
      - "5050:5050"
    volumes:
      - gallery_data:/app/data
    environment:
      - REDIS_URL=redis://redis:6379/0
      - RATELIMIT_STORAGE_URL=redis://redis:6379/1
      - DB_PATH=/app/data/gallery.db
    env_file:
      - .env
    depends_on:
      - redis
    restart: always
    x-casaos:
      name: "Lumina Host"
      icon: "https://cdn-icons-png.flaticon.com/512/8377/8377243.png"
      description: "Secure, decoupled image gallery with WordPress integration."
      category: "Media"
      port_map: "5050"
      scheme: "http"
      index: "/"

  redis:
    image: redis:alpine
    ports:
      - "6380:6379"
    restart: always
    volumes:
      - redis_data:/data

volumes:
  redis_data:
  gallery_data:
